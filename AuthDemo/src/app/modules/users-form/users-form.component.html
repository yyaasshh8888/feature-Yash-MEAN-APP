<div class="container-fluid">
  <div class="card" [ngStyle]="{ height: userId ? '25em' : '40em' }">
    <h3>{{ userId ? "EDIT USER" : "CREATE USER" }}</h3>
    <form [formGroup]="userform" (ngSubmit)="onSubmit()">
      <div class="row">
        <div class="form-group offset-md-1 col-md-10">
          <mat-form-field>
            <mat-label>Username</mat-label>
            <input matInput formControlName="username" type="text" required />
            <mat-error *ngIf="f.username.errors?.required"
              >Username is required
            </mat-error>
            <mat-error *ngIf="f.username.errors?.minlength"
              >Username must contain at least 4 characters
            </mat-error>
            <mat-error *ngIf="f.username.errors?.maxlength"
              >Username should not contain more than 20 characters
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-group offset-md-1 col-md-10">
          <mat-form-field>
            <mat-label for="email">Email</mat-label>
            <input matInput formControlName="email" type="text" required />
            <!-- [readonly]="userId ? true : false" -->
            <mat-error *ngIf="f.email.errors?.required"
              >Email is required</mat-error
            >
            <mat-error *ngIf="f.email.errors?.email || f.email.errors?.pattern"
              >Email is invalid</mat-error
            >
          </mat-form-field>
        </div>

        <div class="form-group offset-md-1 col-md-10" *ngIf="!userId">
          <mat-form-field>
            <mat-label>Password</mat-label>
            <input
              matInput
              formControlName="password"
              type="password"
              required
            />
            <mat-error *ngIf="f.password.errors?.required"
              >Password is required</mat-error
            >
          </mat-form-field>
        </div>

        <div class="form-group offset-md-1 col-md-10" *ngIf="!userId">
          <mat-form-field>
            <mat-label>Confirm Password</mat-label>
            <input
              matInput
              formControlName="confirmPassword"
              type="password"
              required
            />
            <mat-error
              *ngIf="
                userform.invalid && userform.get('confirmPassword').touched
              "
            >
              Password do not match.
            </mat-error>
          </mat-form-field>
        </div>
        <div class="offset-md-1 col-md-10 mb-3 mt-1" *ngIf="!userId">
          <div class="passwordWidgets mda-row" style="text-align: center">
            <div
              class="col-md-3"
              [ngClass]="
                userform.controls['password'].hasError('required') ||
                userform.controls['password'].hasError('minlength')
                  ? userform.get('password').untouched
                    ? 'widget init'
                    : 'widget error'
                  : 'widget success'
              "
            >
              8 Characters
            </div>

            <div
              class="col-md-2"
              [ngClass]="
                userform.controls['password'].hasError('required') ||
                userform.controls['password'].hasError('hasSpecialCharacters')
                  ? userform.get('password').untouched
                    ? 'widget init'
                    : 'widget error'
                  : 'widget success'
              "
            >
              1 Special
            </div>

            <div
              class="col-md-3"
              [ngClass]="
                userform.controls['password'].hasError('required') ||
                userform.controls['password'].hasError('hasCapitalCase')
                  ? userform.get('password').untouched
                    ? 'widget init'
                    : 'widget error'
                  : 'widget success'
              "
            >
              1 Uppercase
            </div>

            <div
              class="col-md-3"
              [ngClass]="
                userform.controls['password'].hasError('required') ||
                userform.controls['password'].hasError('hasNumber')
                  ? userform.get('password').untouched
                    ? 'widget init'
                    : 'widget error'
                  : 'widget success'
              "
            >
              1 Numeric
            </div>
          </div>
        </div>

        <div class="form-group offset-md-1 col-md-10">
          <button type="submit" routerLink="/users" mat-stroked-button>
            Back
          </button>
          <button
            type="submit"
            color="primary"
            [disabled]="!userform.valid"
            style="float: right"
            mat-flat-button
          >
            Submit
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
